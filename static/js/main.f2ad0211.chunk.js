(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(24),c=n(6),a=(n(33),n(34),n(3)),s=n(1),i=function(e){return e.isActive?"navbar-item has-background-grey-lighter":"navbar-item"},l=function(){var e=Object(a.n)().search;return Object(s.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"navbar-brand",children:[Object(s.jsx)(c.c,{className:i,to:"/",children:"Home"}),Object(s.jsx)(c.c,{"aria-current":"page",className:i,to:"/people".concat(e),children:"People"})]})})})},o=(n(36),function(){return Object(s.jsxs)("div",{"data-cy":"app",children:[Object(s.jsx)(l,{}),Object(s.jsx)("div",{className:"section",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(a.b,{})})})]})}),d=n(5),j=n(0),u=function(e){return e.all="all",e.male="m",e.female="f",e}(u||{}),b=function(e){return e.sex="sex",e.query="query",e.centuries="centuries",e}(b||{}),h=function(){var e=Object(c.d)(),t=Object(d.a)(e,2),n=t[0],r=t[1],a=n.get(b.sex)||"",i=n.get(b.query)||"",l=n.getAll(b.centuries)||"",o=function(e){return function(t){t.preventDefault();var c=new URLSearchParams(n);if(e===u.all)return c.delete(b.sex),void r(c);c.set(b.sex,e),r(c)}},j=function(e){return function(t){t.preventDefault();var c=new URLSearchParams(n);if(l.includes(e))return c.delete(b.centuries),l.forEach((function(t){t!==e&&c.append(b.centuries,t)})),void r(c);c.append(b.centuries,e),r(c)}};return Object(s.jsxs)("nav",{className:"panel",children:[Object(s.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(s.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(s.jsx)(c.b,{className:a?"":"is-active",to:"/people?".concat(n.toString()),onClick:o(u.all),children:"All"}),Object(s.jsx)(c.b,{className:a===u.male?"is-active":"",to:"/people",onClick:o(u.male),children:"Male"}),Object(s.jsx)(c.b,{className:a===u.female?"is-active":"",to:"/people",onClick:o(u.female),children:"Female"})]}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsxs)("p",{className:"control has-icons-left",children:[Object(s.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:i,onChange:function(e){var t=new URLSearchParams(n);if(!e.target.value)return t.delete(b.query),void r(t);t.set(b.query,e.target.value),r(t)}}),Object(s.jsx)("span",{className:"icon is-left",children:Object(s.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(s.jsxs)("div",{className:"level-left",children:[Object(s.jsx)(c.c,{"data-cy":"century",className:"button mr-1 ".concat(l.includes("16")&&"is-info"),to:"/people?centuries=16",onClick:j("16"),children:"16"}),Object(s.jsx)(c.b,{"data-cy":"century",className:"button mr-1 ".concat(l.includes("17")&&"is-info"),to:"/people?centuries=17",onClick:j("17"),children:"17"}),Object(s.jsx)(c.b,{"data-cy":"century",className:"button mr-1 ".concat(l.includes("18")&&"is-info"),to:"/people?centuries=18",onClick:j("18"),children:"18"}),Object(s.jsx)(c.b,{"data-cy":"century",className:"button mr-1 ".concat(l.includes("19")&&"is-info"),to:"/people?centuries=19",onClick:j("19"),children:"19"}),Object(s.jsx)(c.b,{"data-cy":"century",className:"button mr-1 ".concat(l.includes("20")&&"is-info"),to:"/people?centuries=20",onClick:j("20"),children:"20"})]}),Object(s.jsx)("div",{className:"level-right ml-4",children:Object(s.jsx)(c.b,{"data-cy":"centuryALL",className:"button is-success ".concat(!!l.length&&"is-outlined"),to:"/people",onClick:function(e){e.preventDefault(),n.delete(b.centuries),r(n)},children:"All"})})]})}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsx)(c.b,{className:"button is-link is-outlined is-fullwidth",to:"/people",onClick:function(e){e.preventDefault();var t=new URLSearchParams;n.forEach((function(e,n){"sort"!==n&&"order"!==n||t.set(n,e)})),r(t)},children:"Reset all filters"})})]})},f=(n(37),function(){return Object(s.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(s.jsx)("div",{className:"Loader__content"})})}),m=n(17),p=n.n(m),x=function(e){return e.female="f",e}(x||{}),O=function(e){var t=e.person,n=e.people,r=Object(a.r)().personId,i=Object(c.d)(),l=Object(d.a)(i,1)[0],o=t.name,j=t.sex,u=t.born,b=t.died,h=t.motherName,f=t.fatherName,m=t.slug,p=n.find((function(e){return e.name===h})),O=n.find((function(e){return e.name===f}));return Object(s.jsxs)("tr",{"data-cy":"person",className:r===m?"has-background-warning":"",children:[Object(s.jsx)("td",{children:Object(s.jsx)(c.b,{to:"/people/".concat(m,"?").concat(l.toString()),className:j===x.female?"has-text-danger":"",children:o})}),Object(s.jsx)("td",{children:j}),Object(s.jsx)("td",{children:u}),Object(s.jsx)("td",{children:b}),Object(s.jsx)("td",{children:p?Object(s.jsx)(c.b,{to:"/people/".concat(p.slug,"?").concat(l.toString()),className:"has-text-danger",children:p.name}):h||"-"}),Object(s.jsx)("td",{children:O?Object(s.jsx)(c.b,{to:"/people/".concat(O.slug,"?").concat(l.toString()),children:O.name}):f||"-"})]})},v=function(e){return e.male="m",e.female="f",e}(v||{}),N=function(e){return e.sex="sex",e.sort="sort",e.query="query",e.order="order",e.centuries="centuries",e}(N||{}),g=function(e){return e.sex="sex",e.name="name",e.born="born",e.died="died",e.desc="desc",e}(g||{}),w=function(e){var t=e.people,n=Object(c.d)(),r=Object(d.a)(n,2),a=r[0],i=r[1],l=a.get(N.sex)||"",o=a.get(N.sort)||"",j=a.get(N.query)||"",u=a.get(N.order)||"",b=a.getAll(N.centuries)||"",h=function(e){return b.length>0?e.filter((function(e){var t=Math.ceil(e.born/100);return b.includes(t.toString())})):e},f=function(e){var t=j.toLowerCase();return e.filter((function(e){var n,r;return(e.name.toLowerCase().includes(t)||null!==(n=e.fatherName)&&void 0!==n&&n.toLowerCase().includes(t)||!(null===(r=e.motherName)||void 0===r||!r.toLowerCase().includes(t)))&&e}))},m=function(e,t){switch(e.preventDefault(),t){case g.name:var n=new URLSearchParams(a);if(n.has(N.order)&&o===g.name){n.delete(N.order),n.delete(N.sort),i(n);break}if(n.has(N.order)&&o!==g.name){n.delete(N.order),n.set(N.sort,g.name),i(n);break}if(o===g.name){n.set(N.order,g.desc),i(n);break}n.set(N.sort,g.name),i(n);break;case g.sex:var r=new URLSearchParams(a);if(r.has(N.order)&&o===g.sex){r.delete(N.order),r.delete(N.sort),i(r);break}if(r.has(N.order)&&o!==g.sex){r.delete(N.order),r.set(N.sort,g.sex),i(r);break}if(o===g.sex){r.set(N.order,g.desc),i(r);break}r.set(N.sort,g.sex),i(r);break;case g.born:var c=new URLSearchParams(a);if(c.has(N.order)&&o===g.born){c.delete(N.order),c.delete("sort"),i(c);break}if(c.has(N.order)&&o!==g.born){c.delete(N.order),c.set(N.sort,g.born),i(c);break}if(o===g.born){c.set(N.order,g.desc),i(c);break}c.set(N.sort,g.born),i(c);break;case g.died:var s=new URLSearchParams(a);if(s.has(N.order)&&o===g.died){s.delete(N.order),s.delete("sort"),i(s);break}if(s.has(N.order)&&o!==g.died){s.delete(N.order),s.set(N.sort,g.died),i(s);break}if(o===g.died){s.set(N.order,g.desc),i(s);break}s.set(N.sort,g.died),i(s)}},x=function(e){switch(o){case g.name:return u?e.sort((function(e,t){return t.name.localeCompare(e.name)})):e.sort((function(e,t){return e.name.localeCompare(t.name)}));case g.sex:return u?e.sort((function(e,t){return t.sex.localeCompare(e.sex)})):e.sort((function(e,t){return e.sex.localeCompare(t.sex)}));case g.born:return u?e.sort((function(e,t){return t.born-e.born})):e.sort((function(e,t){return e.born-t.born}));case g.died:return u?e.sort((function(e,t){return t.died-e.died})):e.sort((function(e,t){return e.died-t.died}));default:return e}}(function(e){switch(l){case v.female:var t=e.filter((function(e){return e.sex===v.female}));return h(f(t));case v.male:var n=e.filter((function(e){return e.sex===v.male}));return h(f(n));default:return h(f(e))}}(t));return Object(s.jsx)(s.Fragment,{children:x.length?Object(s.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:Object(s.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(s.jsx)(c.b,{to:"/people",children:Object(s.jsx)("span",{className:"icon",onClick:function(e){return m(e,g.name)},"aria-hidden":"true",children:Object(s.jsx)("i",{className:p()("fas",{"fa-sort":o!==g.name,"fa-sort-up":o===g.name&&!u,"fa-sort-down":o===g.name&&!!u})})})})]})}),Object(s.jsx)("th",{children:Object(s.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(s.jsx)(c.b,{to:"/people",children:Object(s.jsx)("span",{className:"icon",onClick:function(e){return m(e,g.sex)},"aria-hidden":"true",children:Object(s.jsx)("i",{className:p()("fas",{"fa-sort":o!==g.sex,"fa-sort-up":o===g.sex&&!u,"fa-sort-down":o===g.sex&&!!u})})})})]})}),Object(s.jsx)("th",{children:Object(s.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(s.jsx)(c.b,{to:"/people",children:Object(s.jsx)("span",{className:"icon",onClick:function(e){return m(e,g.born)},"aria-hidden":"true",children:Object(s.jsx)("i",{className:p()("fas",{"fa-sort":o!==g.born,"fa-sort-up":o===g.born&&!u,"fa-sort-down":o===g.born&&!!u})})})})]})}),Object(s.jsx)("th",{children:Object(s.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(s.jsx)(c.b,{to:"/people",children:Object(s.jsx)("span",{className:"icon",onClick:function(e){return m(e,g.died)},"aria-hidden":"true",children:Object(s.jsx)("i",{className:p()("fas",{"fa-sort":o!==g.died,"fa-sort-up":o===g.died&&!u,"fa-sort-down":o===g.died&&!!u})})})})]})}),Object(s.jsx)("th",{children:"Mother"}),Object(s.jsx)("th",{children:"Father"})]})}),Object(s.jsx)("tbody",{children:x.map((function(e){return Object(s.jsx)(O,{person:e,people:t},e.slug)}))})]}):Object(s.jsx)("p",{children:"There are no people matching the current search criteria"})})},k=n(4),y=n(7),C="https://mate-academy.github.io/react_people-table/api/people.json";function S(e){return new Promise((function(t){return setTimeout(t,e)}))}function L(){return(L=Object(y.a)(Object(k.a)().mark((function e(){return Object(k.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S(500).then((function(){return fetch(C)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(){var e=Object(j.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(j.useState)(!1),a=Object(d.a)(c,2),i=a[0],l=a[1],o=Object(j.useState)(!1),u=Object(d.a)(o,2),b=u[0],m=u[1];return Object(j.useEffect)((function(){l(!0),function(){return L.apply(this,arguments)}().then(r).catch((function(){return m(!0)})).finally((function(){return l(!1)}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"title",children:"People Page"}),Object(s.jsx)("div",{className:"block",children:Object(s.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[!!n.length&&!b&&Object(s.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(s.jsx)(h,{})}),Object(s.jsx)("div",{className:"column",children:Object(s.jsxs)("div",{className:"box table-container",children:[i&&Object(s.jsx)(f,{}),!n.length&&!i&&!b&&Object(s.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),!!n.length&&!b&&Object(s.jsx)(w,{people:n}),b&&Object(s.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"})]})})]})})]})},R=function(){return Object(s.jsx)(a.e,{children:Object(s.jsxs)(a.c,{path:"/",element:Object(s.jsx)(o,{}),children:[Object(s.jsx)(a.c,{index:!0,element:Object(s.jsx)("h1",{className:"title",children:"Home Page"})}),Object(s.jsx)(a.c,{path:"people",element:Object(s.jsx)(P,{}),children:Object(s.jsx)(a.c,{path:":personId"})}),Object(s.jsx)(a.c,{path:"/home",element:Object(s.jsx)(a.a,{to:"/",replace:!0})}),Object(s.jsx)(a.c,{path:"*",element:Object(s.jsx)("h1",{className:"title",children:"Page not found"})})]})})};Object(r.createRoot)(document.getElementById("root")).render(Object(s.jsx)(c.a,{children:Object(s.jsx)(R,{})}))}},[[38,1,2]]]);
//# sourceMappingURL=main.f2ad0211.chunk.js.map